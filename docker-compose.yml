version: "3.8"

services:
  media-janitor:
    build: .
    image: media-janitor:latest
    container_name: media-janitor
    restart: unless-stopped
    ports:
      - "9000:9000"
    volumes:
      # Configuration file
      - ./config.yaml:/data/config.yaml:ro
      # Logs and persistent state
      - ./logs:/data/logs
      - ./state:/data/state

      # Media library mounts - adjust paths for your setup
      # The to_path in config.yaml should match these container paths
      - /path/to/your/movies:/media/movies:ro
      - /path/to/your/tv:/media/tv:ro

    environment:
      - TZ=America/New_York  # Adjust to your timezone
    # Optional: limit resources for background scanning
    # Note: Large libraries (50K+ files) need more memory for caching
    deploy:
      resources:
        limits:
          cpus: '2'
          memory: 6G
